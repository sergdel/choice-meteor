<template name="groupForm">
    {{#autoForm schema=schema doc=doc id="groupForm" template="clean"  type=formType meteormethod=formMethod
                resetOnSuccess=resetOnSuccess}}


        <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
            {{#accordionPanel title="Parents" id="parents"}}
                {{>afQuickField name="parents" minCount=1 initialCount=2 template="clean"  }}
                {{>groupFormButtonSubmit new=new edit=edit}}
            {{/accordionPanel}}

            {{#accordionPanel title="Address"  id="contact"}}
                {{>afQuickField name="contact.homePhone" template="bootstrap3" }}
                <div class="{{#if afFieldIsInvalid name='contact.address.street'}} has-error{{/if}}
                    {{#if afFieldIsInvalid name='contact.address.city'}} has-error{{/if}}
                    {{#if afFieldIsInvalid name='contact.address.state'}} has-error{{/if}}
                    {{#if afFieldIsInvalid name='contact.address.zip'}} has-error{{/if}}">
                    {{>afQuickField name="contact.address" }}
                    {{#if afFieldIsInvalid name='contact.address.street'}}
                        <span class="help-block">{{afFieldMessage name='contact.address.street'}}</span>
                    {{/if}}
                    {{#if afFieldIsInvalid name='contact.address.city'}}
                        <span class="help-block">{{afFieldMessage name='contact.address.city'}}</span>
                    {{/if}}
                    {{#if afFieldIsInvalid name='contact.address.state'}}
                        <span class="help-block">{{afFieldMessage name='contact.address.state'}}</span>
                    {{/if}}

                    {{#if afFieldIsInvalid name='contact.address.zip'}}
                        <span class="help-block">{{afFieldMessage name='contact.address.zip'}}</span>
                    {{/if}}
                    {{>groupFormButtonSubmit new=new edit=edit}}
                </div>
            {{/accordionPanel}}
            {{#accordionPanel title="Children" id="children"}}
                {{>afQuickField name="children" minCount=1 initialCount=2 template="clean"}}
                {{>groupFormButtonSubmit new=new edit=edit}}

            {{/accordionPanel}}
            {{#accordionPanel title="Guests" id="guest"}}
                {{>afQuickField name="guests" minCount=1 initialCount=1 template="clean"}}
                {{>groupFormButtonSubmit new=new edit=edit}}

            {{/accordionPanel}}
            {{#accordionPanel title="Pets" id="pets"}}
                {{>afQuickField name="pets" minCount=1 initialCount=3 template="clean"}}
                {{>groupFormButtonSubmit new=new edit=edit}}

            {{/accordionPanel}}
            {{#accordionPanel title="Bedrooms" id="bedrooms"}}
                {{>afQuickField name="bedrooms" minCount=1 initialCount=3 template="clean"}}
                {{>groupFormButtonSubmit new=new edit=edit}}

            {{/accordionPanel}}
            {{#accordionPanel title="Bank Account" id="bank"}}
                {{>afQuickField name="bank"  template="clean" }}
                {{>groupFormButtonSubmit new=new edit=edit}}

            {{/accordionPanel}}
            {{#accordionPanel title="Others Details" id="other"}}
                {{>afQuickField name="other"}}
                {{>groupFormButtonSubmit new=new edit=edit}}

            {{/accordionPanel}}
            {{#accordionPanel title="Photos" id="files"}}
                {{>afQuickField name="files"}}
                {{>groupFormButtonSubmit new=new edit=edit}}

            {{/accordionPanel}}






        </div>
    {{/autoForm}}
</template>

<template name="groupFormButtonSubmit">
    {{#if new}}
        <button type="submit" class="btn btn-primary pull-right btn-lg"
                data-original="Create <i class='fa fa-floppy-o'></i>"
                data-begin="Creating <i class='fa fa-spinner fa-spin fa-fw'></i>"
                data-end="Created <i class='fa fa-check-circle'></i>"
        >Create <i class='fa fa-floppy-o'></i></button>
    {{/if}}
    {{#if edit}}
        <button type="submit" class="btn btn-primary pull-right btn-lg"
                data-original="Save <i class='fa fa-floppy-o'></i>"
                data-begin="Saving <i class='fa fa-spinner fa-spin fa-fw'></i>"
                data-end="Saved <i class='fa fa-check-circle'></i>"

        >Save <i class='fa fa-floppy-o'></i></button>
    {{/if}}
</template>
