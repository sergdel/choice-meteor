<template name="auditList">
    <h1>Log
    </h1>
    {{>searchAuditListForm}}
    {{#if audits.count}}
        <div class="row">
            <div class="col-xs-12 text-right">
                <small>Showing {{showing}} from {{total}}</small>
            </div>
        </div>
        <div class="{{#if Template.subscriptionsReady }}hidden{{/if}} bg-loading">{{>loading}}</div>
        <div class="table-responsive">
            <table class="table ">
                <thead>
                <tr>
                    <th data-header="timestamp"><a href="#" class="orderBy" data-order="timestamp" data-direction="-1">Timestamp
                        At</a> {{{orderBy
                            'timestamp'}}}

                    </th>
                    <th data-header="custom.roles"><a href="#" class="orderBy" data-order="custom.roles"
                                                      data-direction="1">Role
                    </a> {{{orderBy
                            'custom.roles'}}}

                    </th>
                    <th data-header="custom.name"><a href="#" class="orderBy" data-order="custom.name"
                                                     data-direction="-1">Name</a> {{{orderBy
                            'custom.name'}}}

                    </th>
                    <th data-header="action"><a href="#" class="orderBy" data-order="action"
                                                data-direction="-1">Action</a> {{{orderBy
                            'action'}}}
                    </th>
                </tr>
                </thead>
                <tbody>
                {{#transition in="fadeInLeftBig" out="fadeOutRightBig"}}
                    {{#each audits}}
                        <tr class="{{#unless accessed}}zoom{{/unless}}">
                            <td>{{showTime timestamp}} {{showFrom timestamp}}</td>
                            <td>{{showRoles}} </td>
                            <td>{{custom.name}}</td>
                            <td>{{showAction}}</td>
                        </tr>
                        {{#unless accessed}}
                            <tr class="logDetail">
                                <td colspan="3">
                                    <table class="table table-condensed table-bordered">
                                        <thead>
                                        <tr>
                                            <th>Field</th>
                                            <th>Before</th>
                                            <th>After</th>
                                            <th>Operation</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {{#each result}}
                                            <tr>
                                                <td>{{label}}</td>
                                                <td>
                                                    <pre>{{{showObject lhs}}}</pre>
                                                </td>
                                                <td>
                                                    <pre>{{{showObject rhs}}}</pre>
                                                </td>
                                                <td>{{kind}}</td>
                                            </tr>
                                        {{/each}}
                                        </tbody>
                                    </table>
                                </td>
                                <td></td>
                            </tr>
                        {{/unless}}
                    {{/each}}
                {{/transition}}
                </tbody>
            </table>
        </div>

        <div class="row">
            <div class="col-xs-12 text-right">
                <small>Showing {{showing}} from {{total}}</small>
            </div>
        </div>
    {{else}}
        {{#if Template.subscriptionsReady }}
            <div class="row text-center">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <br><br>
                    There is not records with this criteria
                </div>
            </div>
        {{/if}}
    {{/if}}
    {{#if Template.subscriptionsReady }}
        {{#if showMoreLink}}
            <a class="btn btn-block btn-default showMore" href="{{showMoreLink}}">Show more</a>
        {{/if}}
    {{/if}}

</template>


